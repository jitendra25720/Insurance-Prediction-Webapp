{% extends 'base.html' %}
{% block title %} Home{% endblock title %}
{% block body %}


<!-- age	sex	bmi	children	smoker	region	expenses -->

<div class="container my-5">
  <h2 class="col-12 mx-auto" , style="width: 600px;">Insurance Premium Prediction</h2>
</div>
<div class="container my-5 ">

  <form class="row g-3" action="/index" method="post">
    <div class="col-md-6">
      <label for="age" class="form-label">Enter your age</label>
      <input type="number" class="form-control" id="inputage" name="age" min=10 max=100 required>
    </div>

    <div class="col-md-6">
      <label for="sex" class="form-label">Choose your gender</label>
      <select class="form-select" aria-label="Default select example" name="sex" required>
        <option selected>Open this select gender</option>
        <option value="1">Male</option>
        <option value="0">Female</option>
      </select>
    </div>

    <div class="col-md-6">
      <label for="bmi" class="form-label">Enter your BMI</label>
      <input type="number" step=0.01 class="form-control" id="input bmi" name="bmi" min=5 max=70 required>
    </div>

    <div class="col-md-6">
      <label for="smoker" class="form-label">Do you Smoke?</label>
      <select class="form-select" aria-label="Default select example" name="smoker" required>
        <option selected>Open this select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select>
    </div>

    <div class="col-md-6">
      <label for="children" class="form-label">Enter number of children</label>
      <input type="number" min=0, max=20 class="form-control" id="inputchildren" name="children" required>
    </div>

    <div class="col-md-6">
      <label for="region" class="form-label">Select your region</label>
      <select class="form-select" aria-label="Default select example" name="region" required>
        <option selected>Open this select region</option>
        <option value="0">southeast</option>
        <option value="1">southwest</option>
        <option value="2">northeast</option>
        <option value="3">northwest</option>
      </select>
    </div>

    <div class="col-12 mx-auto" , style="width: 200px;">
      <button type="submit" id="btnSubmit" class="btn btn-outline-success"><svg xmlns="http://www.w3.org/2000/svg" width="16"
          height="16" fill="currentColor" class="bi bi-graph-up-arrow" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M0 0h1v15h15v1H0V0Zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5Z" />
        </svg> <strong>Predict</strong></button>
    </div>

  </form>
</br>
  <div class="alert alert-warning alert-dismissible fade show my-2" id="myAlert" role="alert">
    {{prediction_text}} <strong>${{prediction_val}}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  
  <div class="container my-3">
    <h4>All previous predictions</h4>

    {% if allpreds|length == 0 %}

    <div class="alert alert-dark" role="alert">
      No predictions found!
    </div>
    {% else %}
    <table class="table">
      <thead>
        <tr>
          <th scope="col">SNo</th>
          <th scope="col">Age</th>
          <th scope="col">Sex</th>
          <th scope="col">BMI</th>
          <th scope="col">Children</th>
          <th scope="col">Smoker</th>
          <th scope="col">Region</th>
          <th scope="col">Predicted Values</th>
          <th scope="col">Time</th>
          <th scope="col">Action</th>
        </tr>
      </thead>

      <tbody>
        {% for data in allpreds %}
        <tr>
          <th scope="row">{{loop.index}}</th>
          <td>{{data.age}}</td>
          <td>{{data.sex}}</td>
          <td>{{data.bmi}}</td>
          <td>{{data.children}}</td>
          <td>{{data.smoker}}</td>
          <td>{{data.region}}</td>
          <td>${{data.pred}}</td>
          <td>{{data.date_created}}</td>
          <td>
            <a href="/delete/{{data.sno}}" type="button" class="btn btn-outline-dark btn-sm mx-1">Delete</button>
          </td>
        </tr>

        {% endfor %}
      </tbody>
    </table>
    {% endif %}

    <!-- Optional JavaScript; choose one of the two! -->
    <!-- Preventing resubmission of form -->
    <script>
      if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
      }
    </script>
    </body>
  </div>
  
  </body>

  </html>

  <div class="container">
    <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
      <p class="col-md-4 mb-0 text-muted">&copy; 2021 MyWeb, Inc</p>
  
      <a href="/"
        class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
        <svg class="bi me-2" width="40" height="32">
          <use xlink:href="#bootstrap" />
        </svg>
      </a>
  
      <ul class="nav col-md-4 justify-content-end">
        <li class="nav-item"><a href="/" class="nav-link px-2 text-muted">Home</a></li>
        <li class="nav-item"><a href="/analysis" class="nav-link px-2 text-muted">Analysis</a></li>
        <li class="nav-item"><a href="https://github.com/jitendra25720/InsurancePredictionWebapp" class="nav-link px-2 text-muted">Github</a></li>
      </ul>
    </footer>
  </div>

  {% endblock body %}